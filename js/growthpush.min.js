var GrowthPush;!function(a,b){function c(){if(a.XMLHttpRequest)return new a.XMLHttpRequest;try{return new a.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){}throw new Error("no xmlhttp request able to be created")}function d(a,b,c){a[b]=a[b]||c}b.ajax=function(a,b){"string"==typeof a&&(a={url:a});var e=a.headers||{},f=a.body,g=a.method||(f?"POST":"GET"),h=a.withCredentials||!1,i=c();i.onreadystatechange=function(){4==i.readyState&&b(i.status,i.responseText,i)},f&&(d(e,"X-Requested-With","XMLHttpRequest"),d(e,"Content-Type","application/x-www-form-urlencoded")),i.open(g,a.url,!0),i.withCredentials=h;for(var j in e)i.setRequestHeader(j,e[j]);i.send(f)},GrowthPush.nanoajax=b}(window,GrowthPush||(GrowthPush={}));var GrowthPush;!function(a){!function(a){a[a.development=0]="development",a[a.production=1]="production"}(a.EnvironmentType||(a.EnvironmentType={}));var b=(a.EnvironmentType,function(){function b(){}return b.toString=function(b){switch(b){case a.EnvironmentType.development:return"development";case a.EnvironmentType.production:return"production"}return void 0},b.valueOf=function(b){switch(b){case"development":return a.EnvironmentType.development;case"production":return a.EnvironmentType.production}return void 0},b}());a.Environment=b}(GrowthPush||(GrowthPush={}));var GrowthPush;!function(a){var b=function(){function a(){this.UA=window.navigator.userAgent.toLowerCase()}return a.prototype.isViewable=function(){var a=this,b=function(b){return-1!=a.UA.indexOf(b)};return b("android 4.")||b("android 5.")||b("android 6.")},a}();a.UserAgent=b}(GrowthPush||(GrowthPush={}));var GrowthPush;!function(a){var b=function(){function b(b){void 0!=b&&(this.id=b.id,this.growthbeatClientId=b.growthbeatClientId,this.token=b.token,this.applicationId=b.applicationId,this.applicationId=b.growthbeatApplicationId,this.code=b.code,this.os=b.os,this.environment=a.Environment.valueOf(b.environment),this.created=b.created)}return b.register=function(b,c,d,e,f,g,h){a.nanoajax.ajax({url:"https://api.growthpush.com/1/clients/cors",method:"POST",body:"applicationId="+b+"&token="+d+"&os="+e+"&environment="+a.Environment.toString(f)+"&secret="+c},function(b,c){200!==b&&h("failure"),c&&g(new a.Client(JSON.parse(c)))})},b.update=function(b,c,d,e,f,g){a.nanoajax.ajax({url:"https://api.growthpush.com/1/clients/"+b+"/cors",method:"POST",body:"token="+d+"&environment="+a.Environment.toString(e)+"&code="+c},function(b,c){200!==b&&g("failure"),f(new a.Client(JSON.parse(c)))})},b.prototype.getId=function(){return this.id},b.prototype.getGrowthbeatClientId=function(){return this.growthbeatClientId},b.prototype.getToken=function(){return this.token},b.prototype.getApplicationId=function(){return this.applicationId},b.prototype.getGrowthbeatApplicationId=function(){return this.growthbeatApplicationId},b.prototype.getCode=function(){return this.code},b.prototype.getOs=function(){return this.os},b.prototype.getEnvironment=function(){return this.environment},b.prototype.getCreated=function(){return this.created},b}();a.Client=b}(GrowthPush||(GrowthPush={}));var GrowthPush;!function(a){var b=function(){function b(b){this.environment=a.EnvironmentType.production,this.applicationId=b.applicationId,this.secret=b.secret,this.environment=a.Environment.valueOf(b.envrionment),this.os="android",this.receiver=b.receiver}return b.prototype.initialize=function(){var b=this;(new a.UserAgent).isViewable()&&(void 0==this.environment&&(this.environment=a.EnvironmentType.production),"serviceWorker"in navigator&&navigator.serviceWorker.register(this.receiver).then(function(a){"showNotification"in ServiceWorkerRegistration.prototype&&"denied"!==Notification.permission&&"PushManager"in window&&navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){return a?void b.registerClient(a.subscriptionId):void b.subscribe()})["catch"](function(a){})})}))},b.prototype.subscribe=function(){var a=this;navigator.serviceWorker.ready.then(function(b){b.pushManager.subscribe().then(function(b){b&&a.registerClient(b.subscriptionId)})})},b.prototype.registerClient=function(b){var c=new a.Client(JSON.parse(localStorage.getItem("growthpush-client")));return c&&c.getId()?c.getToken()!=b||c.getEnvironment()!=this.environment?void a.Client.update(c.getId(),c.getCode(),b,this.environment,function(a){localStorage.setItem("growthpush-client",JSON.stringify(a))},function(a){}):void 0:void a.Client.register(this.applicationId,this.secret,b,this.os,this.environment,function(a){localStorage.setItem("growthpush-client",JSON.stringify(a))},function(a){})},b}();a.App=b}(GrowthPush||(GrowthPush={}));